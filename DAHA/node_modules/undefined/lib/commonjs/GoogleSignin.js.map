{"version":3,"names":["RNGoogleSignin","NativeModules","IS_IOS","Platform","OS","GoogleSignin","constructor","__DEV__","console","error","signIn","options","configPromise","hasPlayServices","showPlayServicesUpdateDialog","undefined","Error","playServicesAvailable","configure","offlineAccess","webClientId","addScopes","isSignedIn","getCurrentUser","signInSilently","signOut","revokeAccess","clearCachedAccessToken","tokenString","Promise","reject","getTokens","tokens","userObject","idToken","accessToken","GoogleSigninSingleton","statusCodes","SIGN_IN_CANCELLED","IN_PROGRESS","PLAY_SERVICES_NOT_AVAILABLE","SIGN_IN_REQUIRED"],"sources":["GoogleSignin.ts"],"sourcesContent":["import { NativeModules, Platform } from 'react-native';\nimport type {\n  AddScopesParams,\n  SignInParams,\n  ConfigureParams,\n  HasPlayServicesParams,\n  User,\n} from './types';\n\nconst { RNGoogleSignin } = NativeModules;\n\nconst IS_IOS = Platform.OS === 'ios';\n\nclass GoogleSignin {\n  configPromise?: Promise<void>;\n\n  constructor() {\n    if (__DEV__ && !RNGoogleSignin) {\n      console.error(\n        `RN GoogleSignin native module is not correctly linked. Please read the readme, setup and troubleshooting instructions carefully or try manual linking. If you're using Expo, please use expo-google-sign-in. This is because Expo does not support custom native modules.`,\n      );\n    }\n  }\n\n  async signIn(options: SignInParams = {}): Promise<User> {\n    await this.configPromise;\n    return await RNGoogleSignin.signIn(options);\n  }\n\n  async hasPlayServices(\n    options: HasPlayServicesParams = { showPlayServicesUpdateDialog: true },\n  ): Promise<boolean> {\n    if (IS_IOS) {\n      return true;\n    } else {\n      if (options && options.showPlayServicesUpdateDialog === undefined) {\n        throw new Error(\n          'RNGoogleSignin: Missing property `showPlayServicesUpdateDialog` in options object for `hasPlayServices`',\n        );\n      }\n      return RNGoogleSignin.playServicesAvailable(options.showPlayServicesUpdateDialog);\n    }\n  }\n\n  configure(options: ConfigureParams = {}): void {\n    if (options.offlineAccess && !options.webClientId) {\n      throw new Error('RNGoogleSignin: offline use requires server web ClientID');\n    }\n\n    this.configPromise = RNGoogleSignin.configure(options);\n  }\n\n  async addScopes(options: AddScopesParams): Promise<User | null> {\n    const isSignedIn = await this.isSignedIn();\n    if (!isSignedIn) {\n      return null;\n    }\n    return IS_IOS ? RNGoogleSignin.addScopes(options) : RNGoogleSignin.getCurrentUser();\n  }\n\n  async signInSilently(): Promise<User> {\n    await this.configPromise;\n    return RNGoogleSignin.signInSilently();\n  }\n\n  async signOut(): Promise<null> {\n    return RNGoogleSignin.signOut();\n  }\n\n  async revokeAccess(): Promise<null> {\n    return RNGoogleSignin.revokeAccess();\n  }\n\n  async isSignedIn(): Promise<boolean> {\n    return RNGoogleSignin.isSignedIn();\n  }\n\n  async getCurrentUser(): Promise<User | null> {\n    return RNGoogleSignin.getCurrentUser();\n  }\n\n  async clearCachedAccessToken(tokenString: string): Promise<null> {\n    if (!tokenString || typeof tokenString !== 'string') {\n      return Promise.reject('GoogleSignIn: clearCachedAccessToken() expects a string token.');\n    }\n    return IS_IOS ? null : await RNGoogleSignin.clearCachedAccessToken(tokenString);\n  }\n\n  async getTokens(): Promise<{ idToken: string; accessToken: string }> {\n    if (IS_IOS) {\n      const tokens = await RNGoogleSignin.getTokens();\n      return tokens;\n    } else {\n      const userObject = await RNGoogleSignin.getTokens();\n      return {\n        idToken: userObject.idToken,\n        accessToken: userObject.accessToken,\n      };\n    }\n  }\n}\n\nexport const GoogleSigninSingleton = new GoogleSignin();\n\nexport const statusCodes = {\n  SIGN_IN_CANCELLED: RNGoogleSignin.SIGN_IN_CANCELLED,\n  IN_PROGRESS: RNGoogleSignin.IN_PROGRESS,\n  PLAY_SERVICES_NOT_AVAILABLE: RNGoogleSignin.PLAY_SERVICES_NOT_AVAILABLE,\n  SIGN_IN_REQUIRED: RNGoogleSignin.SIGN_IN_REQUIRED,\n};\n"],"mappings":"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"}